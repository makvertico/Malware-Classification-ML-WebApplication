<!DOCTYPE html>
<html lang="en">
<head>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
      integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7"
      crossorigin="anonymous"
    />
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>

<body style="padding: 1.5rem; font-family: 'Poppins', sans-serif;">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>

    <div class="navBar_container" style="text-align: center;">
        <h2 style="font-size: 3.5rem; letter-spacing: 1px;">Analysis Result</h2>
    </div>

    <div style="display: flex; font-size: 2rem; letter-spacing: 1px;">
        <label>File name: &nbsp;</label>
        <div id = "name"></div>
    </div>

    <div style="display: flex; font-size: 2rem; letter-spacing: 1px;">
        <label>Clean : &nbsp;</label>
        <div id = "clean"></div>
    </div>

    <div style="display: flex; font-size: 2rem; letter-spacing: 1px;">
        <label>Malware : &nbsp;</label>
        <div id = "malware"></div>
    </div>

    <canvas id="bar-chart-horizontal" width="40" height="8"></canvas>



    <script>
      const jsfile = JSON.parse({{jsonfile|tojson}});
      const jsonObj = JSON.parse(jsfile);

      console.log("File Name: ",jsonObj.Name[0]);
      console.log("Benign: ",jsonObj[0][0]);
      console.log("Malware: ",jsonObj[1][0]);

    //convert into percentage and display upto 2 decimal places if available   
      var clean = ((jsonObj[0][0])%1!=0) ? (jsonObj[0][0]*100).toFixed(2) : (jsonObj[0][0]*100);
      var malware = ((jsonObj[1][0])%1!=0) ? (jsonObj[1][0]*100).toFixed(2) : (jsonObj[1][0]*100);

      document.getElementById("name").innerHTML = jsonObj.Name[0];
      document.getElementById("clean").innerHTML = clean +" %";
      document.getElementById("malware").innerHTML = malware +" %";


      //chart script
      new Chart(document.getElementById("bar-chart-horizontal"), {
      type: 'horizontalBar',
      data: {
        labels: ["Clean", "Malware"],
        datasets: [
          {
            label: "Prediction Result",
            backgroundColor: ["#59e851", "#e8574d"],
            data: [clean,malware]
          }
        ]
      },
      options: {
        animation: {
            duration: 4000,
        },
        legend: { display: false },
        title: {
          display: true,
          text: 'Prediction based on ML model',
          fontSize: 20,
          fontFamily: "Poppins"
        },
        scales: {
          xAxes: [{
            ticks: {
                suggestedMin: 0,
                suggestedMax: 100,
                fontFamily: "Poppins"
            }
          }],
          yAxes: [{
            ticks: {
                suggestedMin: 0,
                suggestedMax: 100,
                fontFamily: "Poppins"
            }
          }],
        }
      }
  });
    
    </script>
</body>
</html>